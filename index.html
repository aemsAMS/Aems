<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØµÙØ­Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª Ø¹Ù…ÙˆÙ…ÛŒ</title>
<style>
body {margin:0;font-family:sans-serif;background:#0d0d0d;color:white;}
section {margin:20px auto;max-width:1000px;background:linear-gradient(135deg,#111,#222);border-radius:12px;padding:20px;box-shadow:0 0 15px #0ff;}
h2 { color:#0ff;margin-bottom:10px;text-shadow:0 0 5px #0ff;}
.timer { font-family:monospace;font-size:20px;margin-bottom:10px;color:#0ff; }
.winner-container { display:flex; flex-wrap:wrap; gap:10px; max-height:200px; overflow-y:auto; }
.winner-card, .archive-card { background:#111; padding:12px; border-radius:8px; text-align:center; box-shadow:0 0 10px #0ff; transition:0.3s; min-width:120px;}
.winner-card:hover, .archive-card:hover { transform:translateY(-5px); box-shadow:0 0 20px #0ff,0 0 15px #fff;}
.archive-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px;}
img.thumbnail { width:100%; height:100px; object-fit:cover; border-radius:6px; box-shadow:0 0 5px #0ff;}
</style>
</head>
<body>

<!-- Lottery Section -->
<section id="lottery">
  <h2>ğŸ² Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ 72 Ø³Ø§Ø¹ØªÙ‡</h2>
  <div class="timer" id="lotteryTimer"></div>
  <div class="winner-container" id="lotteryWinners"></div>
</section>

<!-- Content Contest Section -->
<section id="contentContest">
  <h2>ğŸ“ Ù…Ø³Ø§Ø¨Ù‚Ù‡ ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ 7 Ø±ÙˆØ²Ù‡</h2>
  <div class="timer" id="contentTimer"></div>
  <div class="winner-container" id="contentWinners"></div>
</section>

<!-- First Place Archive -->
<section>
  <h2>ğŸ† Ø¢Ø±Ø´ÛŒÙˆ Ù†ÙØ± Ø§ÙˆÙ„</h2>
  <div class="archive-grid" id="firstPlaceArchive"></div>
</section>

<script>
const LS_LOTTERY="lotteryWinners";
const LS_CONTENT="contentWinners";
const LS_ARCHIVE="firstPlaceArchive";

let lotteryWinners = JSON.parse(localStorage.getItem(LS_LOTTERY)) || [];
let contentWinners = JSON.parse(localStorage.getItem(LS_CONTENT)) || [];
let firstPlaceArchive = JSON.parse(localStorage.getItem(LS_ARCHIVE)) || [];

function renderWinners(showRank=false){
  const lotteryContainer=document.getElementById("lotteryWinners");
  lotteryContainer.innerHTML="";
  lotteryWinners.forEach((w)=>{ 
    const div=document.createElement("div"); div.className="winner-card";
    div.innerHTML=showRank?`Rank ${w.rank}<br>${w.prize}<br>${w.wallet}`:`${w.wallet}`;
    lotteryContainer.appendChild(div);
  });
  
  const contentContainer=document.getElementById("contentWinners");
  contentContainer.innerHTML="";
  contentWinners.forEach((w)=>{ 
    const div=document.createElement("div"); div.className="winner-card";
    div.innerHTML=showRank?`Rank ${w.rank}<br>${w.prize}<br>${w.wallet}<br><a href="${w.postLink}" target="_blank" style="color:#0ff">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø³Øª</a>`:`${w.wallet}`;
    contentContainer.appendChild(div);
  });
}
renderWinners(false);

function renderArchive(){
  const archive=document.getElementById("firstPlaceArchive");
  archive.innerHTML="";
  firstPlaceArchive.forEach(w=>{
    const div=document.createElement("div");
    div.className="archive-card";
    div.innerHTML=`
      <img class="thumbnail" src="${w.thumbnail}">
      <p>${w.wallet}</p>
      <p>${w.category}</p>
      <p>${w.prize}</p>
      <p>Round ${w.round}</p>
      <p>${w.date}</p>
      ${w.postLink?`<a href="${w.postLink}" target="_blank" style="color:#0ff">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø³Øª</a>`:""}
    `;
    archive.appendChild(div);
  });
}
renderArchive();

// Countdown
let lotteryTime=72*3600;
let contentTime=7*24*3600;
function updateTimers(){
  document.getElementById("lotteryTimer").textContent=formatTime(lotteryTime);
  document.getElementById("contentTimer").textContent=formatTime(contentTime);
  if(lotteryTime>0) lotteryTime--; if(contentTime>0) contentTime--;
}
setInterval(updateTimers,1000);
function formatTime(s){ const d=Math.floor(s/86400); const h=Math.floor((s%86400)/3600); const m=Math.floor((s%3600)/60); const sec=s%60; return `${d?d+"d ":""}${h.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${sec.toString().padStart(2,"0")}`;}
</script>
</body>
</html>
