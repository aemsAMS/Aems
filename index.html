<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ØµÙØ­Ù‡ Ù…Ø³Ø§Ø¨Ù‚Ø§Øª ØªÙˆÚ©Ù†</title>
<style>
body {
  margin:0; font-family:sans-serif; background:#0d0d0d; color:white;
}
.fixed-top {
  position:fixed; top:0; width:100%; z-index:1000; background:rgba(20,20,20,0.9); padding:10px 0;
  display:flex; overflow:hidden;
}
.slider-track {
  display:flex; animation:slide 20s linear infinite;
}
.slider-item {
  flex:none; margin:0 30px; font-weight:bold; color:#0ff;
  text-shadow:0 0 5px #0ff,0 0 10px #fff;
}
@keyframes slide {
  0% { transform:translateX(100%); }
  100% { transform:translateX(-100%); }
}
section {
  margin-top:70px; margin-bottom:30px;
  background:linear-gradient(135deg,#111,#222); border-radius:12px;
  padding:20px; box-shadow:0 0 15px #0ff;
}
h2 { color:#0ff; margin-bottom:10px; text-shadow:0 0 5px #0ff; }
.timer { font-family:monospace; font-size:20px; margin-bottom:10px; color:#0ff; }
.winner-container { display:flex; flex-wrap:wrap; gap:10px; max-height:200px; overflow-y:auto; }
.winner-card, .archive-card {
  background:#111; padding:12px; border-radius:8px; text-align:center;
  box-shadow:0 0 10px #0ff; transition:0.3s; min-width:120px;
}
.winner-card:hover, .archive-card:hover { transform:translateY(-5px); box-shadow:0 0 20px #0ff,0 0 15px #fff; }
input, button {
  padding:8px; border-radius:6px; border:none; margin-bottom:8px;
}
input { width:100%; background:#222; color:white; box-shadow:inset 0 0 5px #0ff; }
button {
  background:linear-gradient(45deg,#0ff,#0f0); color:black; font-weight:bold; cursor:pointer;
  box-shadow:0 0 10px #0ff; transition:0.3s;
}
button:hover { box-shadow:0 0 20px #0ff; transform:scale(1.05); }
.archive-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(150px,1fr)); gap:10px; }
img.thumbnail { width:100%; height:100px; object-fit:cover; border-radius:6px; box-shadow:0 0 5px #0ff; }
</style>
</head>
<body>

<!-- Slider -->
<div class="fixed-top">
  <div class="slider-track" id="winnerSlider"></div>
</div>

<!-- Lottery Section -->
<section id="lottery">
  <h2>ğŸ² Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ 72 Ø³Ø§Ø¹ØªÙ‡</h2>
  <div class="timer" id="lotteryTimer"></div>
  <div class="winner-container" id="lotteryWinners"></div>
  <button onclick="registerLottery()">Ø´Ø±Ú©Øª Ø¯Ø± Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ</button>
  <button onclick="resetLottery()">Ø±ÛŒØ³Øª Ù…Ø³Ø§Ø¨Ù‚Ù‡ (ÙÙ‚Ø· Ù…Ø¯ÛŒØ±)</button>
  <button onclick="endLottery()">Ù¾Ø§ÛŒØ§Ù† Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ùˆ Ø«Ø¨Øª Û³ Ù†ÙØ± Ø¨Ø±ØªØ±</button>
</section>

<!-- Content Contest Section -->
<section id="contentContest">
  <h2>ğŸ“ Ù…Ø³Ø§Ø¨Ù‚Ù‡ ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ 7 Ø±ÙˆØ²Ù‡</h2>
  <div class="timer" id="contentTimer"></div>
  <div class="winner-container" id="contentWinners"></div>
  <input type="text" id="walletInput" placeholder="Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙ Ù¾ÙˆÙ„">
  <input type="text" id="postInput" placeholder="Ù„ÛŒÙ†Ú© Ù¾Ø³Øª">
  <button onclick="submitContent()">Ø§Ø±Ø³Ø§Ù„ Ù…Ø­ØªÙˆØ§</button>
  <button onclick="resetContent()">Ø±ÛŒØ³Øª Ù…Ø³Ø§Ø¨Ù‚Ù‡ (ÙÙ‚Ø· Ù…Ø¯ÛŒØ±)</button>
  <button onclick="endContent()">Ù¾Ø§ÛŒØ§Ù† Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ùˆ Ø«Ø¨Øª Û³ Ù†ÙØ± Ø¨Ø±ØªØ±</button>
</section>

<!-- First Place Archive -->
<section>
  <h2>ğŸ† Ø¢Ø±Ø´ÛŒÙˆ Ù†ÙØ± Ø§ÙˆÙ„</h2>
  <div class="archive-grid" id="firstPlaceArchive"></div>
</section>

<script>
const LS_LOTTERY="lotteryWinners";
const LS_CONTENT="contentWinners";
const LS_ARCHIVE="firstPlaceArchive";

// Load Data
let lotteryWinners = JSON.parse(localStorage.getItem(LS_LOTTERY)) || [];
let contentWinners = JSON.parse(localStorage.getItem(LS_CONTENT)) || [];
let firstPlaceArchive = JSON.parse(localStorage.getItem(LS_ARCHIVE)) || [];

// Save Data
function saveData(){
  localStorage.setItem(LS_LOTTERY, JSON.stringify(lotteryWinners));
  localStorage.setItem(LS_CONTENT, JSON.stringify(contentWinners));
  localStorage.setItem(LS_ARCHIVE, JSON.stringify(firstPlaceArchive));
}

// Populate Slider
function populateSlider(){
  const slider=document.getElementById("winnerSlider");
  slider.innerHTML="";
  const combined=[...lotteryWinners,...contentWinners].slice(0,3); // ÙÙ‚Ø· 3 Ù†ÙØ± Ø¨Ø±ØªØ±
  combined.forEach(w=>{
    const div=document.createElement("div");
    div.className="slider-item";
    div.textContent=`${w.wallet} | Rank:${w.rank} | ${w.prize}`;
    slider.appendChild(div);
  });
}
populateSlider();

// Render Winners
function renderWinners(showAll=true){
  const lotteryContainer=document.getElementById("lotteryWinners");
  lotteryContainer.innerHTML="";
  const list = showAll ? lotteryWinners : lotteryWinners.slice(0,3);
  list.forEach(w=>{
    const div=document.createElement("div");
    div.className="winner-card";
    div.innerHTML=`Rank ${w.rank}<br>${w.prize}<br>${w.wallet}`;
    lotteryContainer.appendChild(div);
  });

  const contentContainer=document.getElementById("contentWinners");
  contentContainer.innerHTML="";
  const contentList = showAll ? contentWinners : contentWinners.slice(0,3);
  contentList.forEach(w=>{
    const div=document.createElement("div");
    div.className="winner-card";
    div.innerHTML=`Rank ${w.rank}<br>${w.prize}<br>${w.wallet}<br><a href="${w.postLink}" target="_blank" style="color:#0ff">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø³Øª</a>`;
    contentContainer.appendChild(div);
  });
}
renderWinners();

// Render Archive
function renderArchive(){
  const archive=document.getElementById("firstPlaceArchive");
  archive.innerHTML="";
  firstPlaceArchive.forEach(w=>{
    const div=document.createElement("div");
    div.className="archive-card";
    div.innerHTML=`
      <img class="thumbnail" src="${w.thumbnail}">
      <p>${w.wallet}</p>
      <p>${w.category}</p>
      <p>${w.prize}</p>
      <p>Round ${w.round}</p>
      <p>${w.date}</p>
      ${w.postLink?`<a href="${w.postLink}" target="_blank" style="color:#0ff">Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù¾Ø³Øª</a>`:""}
    `;
    archive.appendChild(div);
  });
}
renderArchive();

// Countdown
let lotteryTime=72*3600; // seconds
let contentTime=7*24*3600;
function updateTimers(){
  document.getElementById("lotteryTimer").textContent=formatTime(lotteryTime);
  document.getElementById("contentTimer").textContent=formatTime(contentTime);
  if(lotteryTime>0) lotteryTime--;
  if(contentTime>0) contentTime--;
}
setInterval(updateTimers,1000);
function formatTime(s){
  const d=Math.floor(s/86400);
  const h=Math.floor((s%86400)/3600);
  const m=Math.floor((s%3600)/60);
  const sec=s%60;
  return `${d?d+"d ":""}${h.toString().padStart(2,"0")}:${m.toString().padStart(2,"0")}:${sec.toString().padStart(2,"0")}`;
}

// Lottery Functions
function registerLottery(){
  const wallet=prompt("Ø¢Ø¯Ø±Ø³ Ú©ÛŒÙ Ù¾ÙˆÙ„ Ø®ÙˆØ¯ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:");
  if(!wallet) return;
  if(!lotteryWinners.some(w=>w.wallet===wallet)){
    lotteryWinners.push({wallet,wallet,prize:"--",rank:lotteryWinners.length+1});
  }
  saveData(); renderWinners(); populateSlider();
  alert("Ø«Ø¨Øª Ø´Ù…Ø§ Ø¯Ø± Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ Ø§Ù†Ø¬Ø§Ù… Ø´Ø¯!");
}
function resetLottery(){
  if(confirm("Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù‚Ø±Ø¹Ù‡â€ŒÚ©Ø´ÛŒ Ø±ÛŒØ³Øª Ø´ÙˆØ¯ØŸ")){
    lotteryWinners=[];
    saveData(); renderWinners(); populateSlider();
  }
}
function endLottery(){
  const top3 = [];
  for(let i=1;i<=3;i++){
    const wallet=prompt(`Ø¢Ø¯Ø±Ø³ Ø¨Ø±Ù†Ø¯Ù‡ Ø±ØªØ¨Ù‡ ${i} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:`); 
    const prize=prompt(`Ù…Ù‚Ø¯Ø§Ø± Ø¬Ø§ÛŒØ²Ù‡ Ø±ØªØ¨Ù‡ ${i} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:`); 
    top3.push({wallet,wallet,rank:i,prize});
  }
  lotteryWinners = top3;
  saveData(); renderWinners(false); populateSlider();
  alert("Û³ Ù†ÙØ± Ø¨Ø±ØªØ± Ø«Ø¨Øª Ø´Ø¯Ù†Ø¯!");
}

// Content Functions
function submitContent(){
  const wallet=document.getElementById("walletInput").value;
  const post=document.getElementById("postInput").value;
  if(!wallet||!post){ alert("Ù„Ø·ÙØ§Ù‹ Ù‡Ù…Ù‡ ÙÛŒÙ„Ø¯Ù‡Ø§ Ø±Ø§ Ù¾Ø± Ú©Ù†ÛŒØ¯"); return; }
  contentWinners.push({wallet,wallet,postLink:post,prize:"--",rank:contentWinners.length+1});
  saveData(); renderWinners(); populateSlider();
  document.getElementById("walletInput").value=""; document.getElementById("postInput").value="";
}
function resetContent(){
  if(confirm("Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ù…Ø³Ø§Ø¨Ù‚Ù‡ Ù…Ø­ØªÙˆØ§ Ø±ÛŒØ³Øª Ø´ÙˆØ¯ØŸ")){
    contentWinners=[];
    saveData(); renderWinners(); populateSlider();
  }
}
function endContent(){
  const top3 = [];
  for(let i=1;i<=3;i++){
    const wallet=prompt(`Ø¢Ø¯Ø±Ø³ Ø¨Ø±Ù†Ø¯Ù‡ Ø±ØªØ¨Ù‡ ${i} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:`); 
    const prize=prompt(`Ù…Ù‚Ø¯Ø§Ø± Ø¬Ø§ÛŒØ²Ù‡ Ø±ØªØ¨Ù‡ ${i} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:`); 
    const postLink=prompt(`Ù„ÛŒÙ†Ú© Ù¾Ø³Øª Ø¨Ø±Ù†Ø¯Ù‡ Ø±ØªØ¨Ù‡ ${i} Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯:`); 
    top3.push({wallet,wallet,rank:i,prize,postLink});
  }
  contentWinners = top3;
  saveData(); renderWinners(false); populateSlider();
  alert("Û³ Ù†ÙØ± Ø¨Ø±ØªØ± Ø«Ø¨Øª Ø´Ø¯Ù†Ø¯!");
}

// First Place Archive Add
function addFirstPlace(wallet, category, prize, thumbnail, postLink, round, date){
  firstPlaceArchive.push({wallet,category,prize,thumbnail,postLink,round,date});
  saveData(); renderArchive(); populateSlider();
}
</script>
</body>
</html>
